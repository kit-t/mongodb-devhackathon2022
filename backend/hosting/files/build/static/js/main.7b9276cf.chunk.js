(this["webpackJsonpmongodb-devhackathon-2022"]=this["webpackJsonpmongodb-devhackathon-2022"]||[]).push([[0],{160:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),o=n.n(c),i=(n(160),n(7)),s=n.n(i),u=n(13),l=n(224),d=n(225),f=n(216),b=n(71),p=n(11),j=n(21),m=n(58),h=n(210),O=n(213),v=n(226),x=n(215),g=n(212),w=n(139),k=n.n(w),y=n(140),T=n.n(y),C=n(45),I=n(6);function D(e){return new m.a({id:e,baseUrl:C.c})}var A=a.a.createContext(null);function S(e){var t=e.appId,n=e.children,r=a.a.useState(D(t)),c=Object(j.a)(r,2),o=c[0],i=c[1];a.a.useEffect((function(){i(D(t))}),[t]);var l=a.a.useState(o.currentUser),d=Object(j.a)(l,2),f=d[0],b=d[1],m=a.a.useCallback(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logIn(t);case 2:b(o.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o]),h=a.a.useCallback(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===f||void 0===f?void 0:f.logOut();case 2:return e.next=4,o.removeUser(f);case 4:b(o.currentUser);case 5:case"end":return e.stop()}}),e)}))),[o,f]),O=a.a.useMemo((function(){return Object(p.a)(Object(p.a)({},o),{},{currentUser:f,logIn:m,logOut:h})}),[o,f,m,h]);return Object(I.jsx)(A.Provider,{value:O,children:n})}function _(){var e=a.a.useContext(A);if(!e)throw new Error("No Realm App found. Make sure to call useRealmApp() inside of a <RealmAppProvider />.");return e}var U=n(133),E=n.n(U),R=n(211),q="GraphQL";function L(){return Object(I.jsxs)(b.a,{className:"app-bar-title",component:"h1",variant:"h5",children:["My ",q," App"]})}function M(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F,{}),Object(I.jsx)(B,{})]})}function N(e){var t=e.children;return Object(I.jsx)(h.a,{style:{textAlign:"center",padding:"14px 0",marginTop:"auto"},children:t})}function B(){return Object(I.jsxs)(N,{children:[Object(I.jsxs)("span",{children:["Built with the MongoDB Realm ",q," Template"]})," |"," ",Object(I.jsx)(R.a,{target:"_blank",href:"https://docs.mongodb.com/realm",children:"Docs"})]})}var P=function(e,t){var n=new URL(e).pathname,r=E.a.join(n,t);return new URL(r,e).href}(C.b,"/graphql/explore");function F(){return Object(I.jsx)(N,{children:Object(I.jsxs)("span",{children:["Try some queries in the"," ",Object(I.jsx)(R.a,{target:"_blank",href:P,children:"GraphiQL Explorer"})]})})}var $=n(26),z=function(e){return!e},J=function(e,t){return!(t<0||t>=e.length)};var W=function(e,t){var n=e.findIndex((function(e){return n=e,r=t,String(null===n||void 0===n?void 0:n._id)===String(null===r||void 0===r?void 0:r._id);var n,r}));return n>=0?n:null},G=n(227);function Q(e){return Object(I.jsx)(G.a,Object(p.a)({elevation:6,variant:"filled"},e))}function Y(e){var t=e.isOpen,n=e.message,r=e.onClose,a=void 0===r?function(){}:r;return t?Object(I.jsx)(Q,{onClose:a,severity:"error",children:n}):null}function H(){var e,t,n=_(),r=a.a.useState(!1),c=Object(j.a)(r,2),o=c[0],i=c[1],l={email:null,password:null,other:null},d=a.a.useState(l),w=Object(j.a)(d,2),y=w[0],C=w[1],D=function(){return C(l)},A=function(e){var t=e.error,n=e.clearError,r=e.hideAfterMs,c=a.a.useState(!1),o=Object(j.a)(c,2),i=o[0],s=o[1],u=a.a.useCallback((function(){n(),s(!1)}),[n]);return a.a.useEffect((function(){if(t){if(s(!0),r){var e=setTimeout((function(){u()}),r);return function(){clearTimeout(e)}}}else s(!1)}),[t,u,r]),function(){return Object(I.jsx)(Y,{isOpen:i,message:t,onClose:function(){u()}})}}({error:y.other,clearError:function(){C((function(e){return Object(p.a)(Object(p.a)({},e),{},{other:null})}))}}),S=a.a.useState(!1),U=Object(j.a)(S,2),E=U[0],R=U[1],q=function(){var e=Object(u.a)(s.a.mark((function e(t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,a=t.password,D(),e.prev=2,!o){e.next=6;break}return e.next=6,n.emailPasswordAuth.registerUser(r,a);case 6:return e.next=8,n.logIn(m.c.emailPassword(r,a));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),K(e.t0,C);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(h.a,{maxWidth:"sm",className:"main-container",children:[Object(I.jsx)(O.a,{className:"auth-card",variant:"outlined",children:Object(I.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()),r=n.email,a=n.password;q({email:r,password:a})},children:[Object(I.jsx)(b.a,{component:"h2",variant:"h4",gutterBottom:!0,children:o?"Sign Up":"Log In"}),Object(I.jsx)(A,{}),Object(I.jsx)(v.a,{id:"input-email",name:"email",label:"Email Address",variant:"outlined",error:Boolean(y.email),helperText:null!==(e=y.email)&&void 0!==e?e:""}),Object(I.jsx)(v.a,{id:"input-password",type:E?"text":"password",name:"password",label:"Password",variant:"outlined",error:Boolean(y.password),helperText:null!==(t=y.password)&&void 0!==t?t:"",InputProps:{endAdornment:Object(I.jsx)(x.a,{position:"end",children:Object(I.jsx)(g.a,{"aria-label":"toggle password visibility",onClick:function(){return R(z)},onMouseDown:function(e){e.preventDefault()},children:E?Object(I.jsx)(k.a,{}):Object(I.jsx)(T.a,{})})})}}),Object(I.jsx)(f.a,{type:"submit",variant:"contained",color:"primary",children:o?"Create Account":"Log In"}),Object(I.jsx)("button",{type:"button",className:"link-button",onClick:function(){return D(),void i(z)},children:o?"Already have an account? Log In":"Sign up for an account"})]})}),Object(I.jsx)(B,{})]})}function K(e,t){var n=function(){t((function(e){return Object(p.a)(Object(p.a)({},e),{},{other:"Something went wrong. Try again in a little bit."})})),console.warn("Something went wrong with a Realm login or signup request. See the following error for details."),console.error(e)};if(e instanceof m.d){var r=e.error,a=e.statusCode;switch(r||a){case"invalid username":t((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case 401:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case 409:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case 400:t((function(e){return Object(p.a)(Object(p.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}));break;default:n()}}else n()}var V,X,Z,ee,te=n(70),ne=n(221),re=n(214),ae=n(146),ce=n.n(ae),oe=n(82),ie=n(53),se=n(141),ue=n(94),le=function(){},de={onInsert:le,onUpdate:le,onReplace:le,onDelete:le};function fe(){var e=_(),t=function(){var e=_();if(!e.currentUser)throw new Error("You must be logged in to Realm to call useApolloClient()");return a.a.useMemo((function(){var t="".concat(C.c,"/api/client/v2.0/app/").concat(e.id,"/graphql");function n(){return r.apply(this,arguments)}function r(){return(r=Object(u.a)(s.a.mark((function t(){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(se.a)(e.currentUser.accessToken),r=n.exp,!(Date.now()>=1e3*r)){t.next=5;break}return t.next=5,e.currentUser.refreshCustomData();case 5:return t.abrupt("return",e.currentUser.accessToken);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return new ie.ApolloClient({link:new ie.HttpLink({uri:t,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(u.a)(s.a.mark((function e(t,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return a=e.sent,r.headers.Authorization="Bearer ".concat(a),e.abrupt("return",fetch(t,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new ie.InMemoryCache})}),[e.currentUser,e.id])}(),n=a.a.useState([]),r=Object(j.a)(n,2),c=r[0],o=r[1],i=a.a.useState(!0),l=Object(j.a)(i,2),d=l[0],f=l[1];return a.a.useEffect((function(){var e=Object(ie.gql)(V||(V=Object(oe.a)(["\n      query FetchAllTodos {\n        tasks {\n          _id\n          _partition\n          isComplete\n          summary\n        }\n      }\n    "])));t.query({query:e}).then((function(e){var t=e.data;o(t.tasks),f(!1)}))}),[t]),function(e,t){var n=a.a.useMemo((function(){return{}}),[]),r=Object(p.a)(Object(p.a)({},de),t),c=a.a.useRef(r);a.a.useEffect((function(){c.current={onInsert:r.onInsert,onUpdate:r.onUpdate,onReplace:r.onReplace,onDelete:r.onDelete}}),[r.onInsert,r.onUpdate,r.onReplace,r.onDelete]),a.a.useEffect((function(){!function(){var t=Object(u.a)(s.a.mark((function t(){var r,a,o,i,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,i=Object(ue.a)(e.watch({filter:n}));case 4:return t.next=6,i.next();case 6:return u=t.sent,r=u.done,t.next=10,u.value;case 10:if(l=t.sent,r){t.next=28;break}d=l,t.t0=d.operationType,t.next="insert"===t.t0?16:"update"===t.t0?18:"replace"===t.t0?20:"delete"===t.t0?22:24;break;case 16:return c.current.onInsert(d),t.abrupt("break",25);case 18:return c.current.onUpdate(d),t.abrupt("break",25);case 20:return c.current.onReplace(d),t.abrupt("break",25);case 22:return c.current.onDelete(d),t.abrupt("break",25);case 24:throw new Error("Invalid change operation type: ".concat(d.operationType));case 25:r=!0,t.next=4;break;case 28:t.next=34;break;case 30:t.prev=30,t.t1=t.catch(2),a=!0,o=t.t1;case 34:if(t.prev=34,t.prev=35,r||null==i.return){t.next=39;break}return t.next=39,i.return();case 39:if(t.prev=39,!a){t.next=42;break}throw o;case 42:return t.finish(39);case 43:return t.finish(34);case 44:case"end":return t.stop()}}),t,null,[[2,30,34,44],[35,,39,43]])})));return function(){return t.apply(this,arguments)}}()()}),[e,n])}(function(e){var t=e.cluster,n=void 0===t?"mongodb-atlas":t,r=e.db,c=e.collection,o=_();return a.a.useMemo((function(){return o.currentUser.mongoClient(n).db(r).collection(c)}),[o.currentUser,n,r,c])}({cluster:C.d,db:"todo",collection:"Task"}),{onInsert:function(e){o((function(t){var n;if(d)return t;var r=null!==(n=W(t,e.fullDocument))&&void 0!==n?n:t.length;return r===t.length?function(e,t,n){if(!J(e,t)&&t!==e.length)throw new Error("Cannot add value. Array index out of bounds.");return[].concat(Object($.a)(e.slice(0,t)),[n],Object($.a)(e.slice(t)))}(t,r,e.fullDocument):t}))},onUpdate:function(e){o((function(t){return d?t:function(e,t,n){if(!J(e,t))throw new Error("Cannot update value. Array index out of bounds.");return[].concat(Object($.a)(e.slice(0,t)),[n(e[t])],Object($.a)(e.slice(t+1)))}(t,W(t,e.fullDocument),(function(){return e.fullDocument}))}))},onReplace:function(e){o((function(t){return d?t:function(e,t,n){if(!J(e,t))throw new Error("Cannot replace value. Array index out of bounds.");return[].concat(Object($.a)(e.slice(0,t)),[n],Object($.a)(e.slice(t+1)))}(t,W(t,e.fullDocument),e.fullDocument)}))},onDelete:function(e){o((function(t){if(d)return t;var n=W(t,{_id:e.documentKey._id});return n>=0?function(e,t){if(!J(e,t))throw new Error("Cannot remove value. Array index out of bounds.");return[].concat(Object($.a)(e.slice(0,t)),Object($.a)(e.slice(t+1)))}(t,n):t}))}}),{loading:d,todos:c,saveTodo:function(){var n=Object(u.a)(s.a.mark((function n(r){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.summary){n.next=11;break}return r._partition=e.currentUser.id,n.prev=2,n.next=5,t.mutate({mutation:Object(ie.gql)(X||(X=Object(oe.a)(["\n            mutation SaveTask($todo: TaskInsertInput!) {\n              insertOneTask(data: $todo) {\n                _id\n                _partition\n                isComplete\n                summary\n              }\n            }\n          "]))),variables:{todo:r}});case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(2),n.t0.message.match(/^Duplicate key error/)&&console.warn("The following error means that we tried to insert a todo multiple times (i.e. an existing todo has the same _id). In this app we just catch the error and move on. In your app, you might want to debounce the save input or implement an additional loading state to avoid sending the request in the first place."),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}(),toggleTodo:function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mutate({mutation:Object(ie.gql)(Z||(Z=Object(oe.a)(["\n        mutation ToggleTaskComplete($taskId: ObjectId!) {\n          updateOneTask(query: { _id: $taskId }, set: { isComplete: "," }) {\n            _id\n            _partition\n            isComplete\n            summary\n          }\n        }\n      "])),!n.isComplete),variables:{taskId:n._id}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteTodo:function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mutate({mutation:Object(ie.gql)(ee||(ee=Object(oe.a)(["\n        mutation DeleteTask($taskId: ObjectId!) {\n          deleteOneTask(query: { _id: $taskId }) {\n            _id\n          }\n        }\n      "]))),variables:{taskId:n._id}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}var be=n(217),pe=n(218),je=n(228),me=n(219),he=n(220),Oe=n(102),ve=n.n(Oe);function xe(e){var t=e.todo,n=e.todoActions;return Object(I.jsxs)(be.a,{children:[Object(I.jsx)(pe.a,{children:Object(I.jsx)(je.a,{edge:"start",color:"primary",checked:t.isComplete,onClick:function(){n.toggleTodo(t)}})}),Object(I.jsx)(me.a,{children:t.summary}),Object(I.jsx)(he.a,{children:Object(I.jsx)(g.a,{edge:"end",size:"small",onClick:function(){n.deleteTodo(t)},children:Object(I.jsx)(ve.a,{})})})]})}var ge=n(9),we=Object(ge.a)({secondaryAction:{paddingRight:"120px"}})(be.a);function ke(e){var t=e.todo,n=e.todoActions,r=e.draftTodoActions;return Object(I.jsxs)(we,{children:[Object(I.jsx)(me.a,{inset:!0,children:Object(I.jsx)(v.a,{style:{width:"100%"},placeholder:"What needs doing?",size:"small",value:t.summary,onChange:function(e){r.setDraftTodoSummary(t,e.target.value)}})}),Object(I.jsxs)(he.a,{children:[Object(I.jsx)(f.a,{variant:"outlined",size:"small",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveTodo(t);case 2:r.deleteDraftTodo(t);case 3:case"end":return e.stop()}}),e)}))),children:"Save"}),Object(I.jsx)(g.a,{edge:"end",size:"small",onClick:function(){r.deleteDraftTodo(t)},children:Object(I.jsx)(ve.a,{})})]})]})}function ye(e,t){var n,r,c=a.a.useState(!1),o=Object(j.a)(c,2),i=o[0],s=o[1];return n=function(){e&&s(!0)},r=[t],a.a.useEffect((function(){var e=setTimeout((function(){n()}),r);return function(){return clearTimeout(e)}}),[n,r]),a.a.useEffect((function(){e||s(!1)}),[e]),i}function Te(){var e=fe(),t=e.loading,n=e.todos,r=Object(te.a)(e,["loading","todos"]),c=function(){var e=a.a.useState([]),t=Object(j.a)(e,2),n=t[0],r=t[1];return{draftTodos:n,createDraftTodo:function(){var e={_id:new m.b.ObjectID,summary:"",isComplete:!1};r((function(t){return[].concat(Object($.a)(t),[e])}))},setDraftTodoSummary:function(e,t){r((function(n){var r=n.findIndex((function(t){return t._id===e._id}));return[].concat(Object($.a)(n.slice(0,r)),[Object(p.a)(Object(p.a)({},n[r]),{},{summary:t})],Object($.a)(n.slice(r+1)))}))},deleteDraftTodo:function(e){r((function(t){var n=t.findIndex((function(t){return t._id===e._id}));return[].concat(Object($.a)(t.slice(0,n)),Object($.a)(t.slice(n+1)))}))}}}(),o=c.draftTodos,i=Object(te.a)(c,["draftTodos"]),s=ye(t,200);return Object(I.jsxs)(h.a,{className:"main-container",maxWidth:"sm",children:[t?s?Object(I.jsx)(ne.a,{}):null:Object(I.jsxs)("div",{className:"todo-items-container",children:[Object(I.jsx)(b.a,{component:"p",variant:"h5",children:"You have ".concat(n.length," To-Do Item").concat(1===n.length?"":"s")}),Object(I.jsx)(f.a,{variant:"contained",color:"primary",startIcon:Object(I.jsx)(ce.a,{}),onClick:function(){return i.createDraftTodo()},children:"Add To-Do"}),Object(I.jsxs)(re.a,{style:{width:"100%"},children:[n.map((function(e){return Object(I.jsx)(xe,{todo:e,todoActions:r},String(e._id))})),o.map((function(e){return Object(I.jsx)(ke,{todo:e,todoActions:r,draftTodoActions:i},String(e._id))}))]})]}),Object(I.jsx)(M,{})]})}var Ce=n(147),Ie=n(223),De=n(106),Ae=n(222),Se=n(105),_e=n(104),Ue={green:Object(p.a)(Object(p.a)({},De.a),{},{500:"#09804C",A400:"#B9EACD"}),purple:Object(p.a)(Object(p.a)({},Ae.a),{},{500:"#6200EE",A400:"#9795F9"}),orange:Se.a,red:_e.a},Ee={palette:{primary:Ue.purple,secondary:Ue.purple}},Re=Object(Ce.a)(Ee);function qe(e){var t=e.children;return Object(I.jsx)(Ie.a,{theme:Re,children:t})}n(178);function Le(){return Object(I.jsx)(qe,{children:Object(I.jsx)(S,{appId:C.a,children:Object(I.jsx)(Me,{})})})}function Me(){var e=_(),t=e.currentUser,n=e.logOut;return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(l.a,{position:"sticky",children:Object(I.jsxs)(d.a,{children:[Object(I.jsx)(L,{}),t?Object(I.jsx)(f.a,{variant:"contained",color:"secondary",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)}))),children:Object(I.jsx)(b.a,{variant:"button",children:"Log Out"})}):null]})}),t?Object(I.jsx)(Te,{}):Object(I.jsx)(H,{})]})}var Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(Le,{})}),document.getElementById("root")),Ne()},45:function(e){e.exports=JSON.parse('{"a":"devhackathon2022-jgcnc","b":"https://realm.mongodb.com/groups/61dec0a9b6e4b93f6a9a2a39/apps/61dec58aaf2d5f135f8e3327","c":"https://realm.mongodb.com","d":"mongodb-atlas"}')}},[[179,1,2]]]);